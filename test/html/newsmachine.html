<!DOCTYPE html>
<html>
<head>
 <script src="https://code.jquery.com/jquery.min.js"></script>
 <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
 <meta charset="utf-8">
 <meta name="viewport" content="width=device-width">
 <meta name="description" content="Snapshot of all major news sites">
 <meta property="og:image" content=""/>
 <title>Newsmachine</title>
</head>
<body>
  <style>
    img {
      max-height: 300px;
      /*overflow-y: hidden;
      box-shadow: 0 0 15px #999;
      margin: 1em*/
    }

    .thumbnail {
      max-height: 200px;
      overflow: hidden;
    }
    .caption {
      font-size: .8em;
    }

  </style>
  <div class="container" id="images"></div>

  <script type="text/javascript">
  $(function(){

    function ajaxImage (url, callback) {
      var image;

      $.ajax({
        type: "GET",
        url: url,
        dataType: "image/jpg",
        success: function(img) {
          image = new Image();
          image.src = img;
          callback(image);
        },
        error: function(err) {
          image = new Image();
          image.src = 'http://website.site/image.png' // your error image
          callback(image);
        }
      });
    }

    var baseUrl = 'http://s3.amazonaws.com/cdn.newsblock.io/newsmachine/latest/';
    var ajaxOptions = {
      url:'http://s3.amazonaws.com/cdn.newsblock.io/newsmachine/manifest.json',
      cache: false,
      success: function (data) {
        data.pages.forEach(function(page){
          var tmpl = `
              <div class="col-sm-6 col-md-4">
                <div class="thumbnail">
                  <div class="caption">
                    ${page.url}, lastMod: ??
                  </div>
                  <img class="img-thumbnail" src="${baseUrl}${page.image}" />
                </div>
              </div>
          `;
          $('#images').append(tmpl);
        });
      },
      error: function (resp, err, msg) {
        console.log('err:', err);
      }
    };
    $.ajax(ajaxOptions);
  });
  </script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-372716-21', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
